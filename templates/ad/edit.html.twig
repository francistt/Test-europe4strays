{% extends 'base.html.twig' %}

{% block title %}Edition d'une annonce
{% endblock %}

{% form_theme form 'ad/_collection.html.twig' %}

{% block content %}

	<div class="container">
		<h1 class="my-5">Modifier l'annonce :
			{{ad.name}}</h1>

		{{ form_start(form) }}

		<div class="row">
			<div class="col">
				<div class="card bg-light">
					<div class="card-header">
						<h3 class="card-title">Informations générales</h3>
					</div>
					<div class="alert alert-light">
						{{ form_row(form.name) }}
						{{ form_row(form.type) }}
						{{ form_row(form.age) }}
						{{ form_row(form.sexe) }}
						{{ form_row(form.size) }}
						{{ form_row(form.city) }}
					</div>
				</div>

				<div class="card bg-light mt-3">
					<div class="card-header">
						<h3 class="card-title">Détails de l'annonce</h3>
					</div>
					<div class="alert alert-light">
						{{ form_row(form.introduction) }}
						{{ form_row(form.content) }}
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card bg-light">
					<div class="card-header">
						<h3 class="card-title">Images de l'annonce</h3>
					</div>
					<div class="alert alert-light">

						<div>
							<img src="{{ asset('/uploads/' ~ ad.coverImage) }}" alt="CoverImage" width="300">
						</div>

						<div class="upload-image-strip">
							<button type="button" class="file-select-button btn btn-info">
								<i class="fas fa-edit"></i>
								<span class="name-file">
									Modifier l'image principale</span>
							</button>
							{{ form_row(form.coverImage, {'label': ' '}) }}
						</div>

						{{ form_row(form.images) }}
					

						{% for image in ad.images2 %}
							<div class="image mb-2">
								<img src="{{ asset('/uploads/' ~ image.name) }}" alt="Image" width="100">
								<a href="{{ path('ad_delete_image', {'id': image.id}) }}" data-delete data-token="{{ csrf_token('delete' ~ image.id) }}">
									<i class="fas fa-trash fa-2x"></i>
								</a>
							</div>
						{% endfor %}


					</div>
				</div>
				<div class="alert alert-success mt-3">
					<button type="submit" class="btn btn-success btn-block">
						<i class="fas fa-check"></i>
						Enregistrer les modifications
					</button>
				</div>
			</div>
		</div>

		{{ form_end(form) }}
	</div>

{% endblock %}

{% block javascripts %}

	<script src="/js/ad.js"></script>
	<script src="{{ asset('js/images.js') }}"></script>
{% endblock %}
